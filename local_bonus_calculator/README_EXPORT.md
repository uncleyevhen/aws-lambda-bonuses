# KeyCRM Client Export Script

–ë–∞–≥–∞—Ç–æ–ø—Ä–æ—Ü–µ—Å–æ—Ä–Ω–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –µ–∫—Å–ø–æ—Ä—Ç—É –¥–∞–Ω–∏—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤ –∑ KeyCRM —É CSV —Ñ–∞–π–ª.

## –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

–°–∫—Ä–∏–ø—Ç –≤–∏—Ç—è–≥—É—î –Ω–∞—Å—Ç—É–ø–Ω—ñ –¥–∞–Ω—ñ –ø—Ä–æ –∫–ª—ñ—î–Ω—Ç—ñ–≤:
- **ID –∫–ª—ñ—î–Ω—Ç–∞** - —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä
- **–Ü–º'—è** - –ø–µ—Ä—à–µ —Å–ª–æ–≤–æ –∑ –ø–æ–≤–Ω–æ–≥–æ —ñ–º–µ–Ω—ñ
- **–ü—Ä—ñ–∑–≤–∏—â–µ** - —Ä–µ—à—Ç–∞ —Å–ª—ñ–≤ –∑ –ø–æ–≤–Ω–æ–≥–æ —ñ–º–µ–Ω—ñ
- **–ü–æ–≤–Ω–µ —ñ–º'—è** - —è–∫ –∑–±–µ—Ä–µ–∂–µ–Ω–æ –≤ —Å–∏—Å—Ç–µ–º—ñ
- **Email** - –≤—Å—ñ –µ–º–µ–π–ª–∏ –∫–ª—ñ—î–Ω—Ç–∞ (—á–µ—Ä–µ–∑ –∫–æ–º—É)
- **–¢–µ–ª–µ—Ñ–æ–Ω** - –≤—Å—ñ —Ç–µ–ª–µ—Ñ–æ–Ω–∏ –∫–ª—ñ—î–Ω—Ç–∞ (—á–µ—Ä–µ–∑ –∫–æ–º—É)
- **–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞ –∑–∞–º–æ–≤–ª–µ–Ω—å** - —Å—É–º–∞—Ä–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å –≤—Å—ñ—Ö –∑–∞–º–æ–≤–ª–µ–Ω—å —É ‚Ç¥
- **–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–º–æ–≤–ª–µ–Ω—å** - –∑–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—Ö –∑–∞–º–æ–≤–ª–µ–Ω—å
- **–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è** - –∫–æ–ª–∏ –∫–ª—ñ—î–Ω—Ç –±—É–≤ –¥–æ–¥–∞–Ω–∏–π –≤ —Å–∏—Å—Ç–µ–º—É

## –ü–µ—Ä–µ–≤–∞–≥–∏

‚úÖ **–ë–∞–≥–∞—Ç–æ–ø—Ä–æ—Ü–µ—Å–æ—Ä–Ω—ñ—Å—Ç—å** - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤—Å—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ —è–¥—Ä–∞ CPU –¥–ª—è —à–≤–∏–¥–∫–æ—ó –æ–±—Ä–æ–±–∫–∏  
‚úÖ **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –ø—Ä–æ–∫—Å—ñ** - –æ–±—Ö–æ–¥–∏—Ç—å rate limiting —á–µ—Ä–µ–∑ —Ä–æ—Ç–∞—Ü—ñ–π–Ω—ñ –ø—Ä–æ–∫—Å—ñ  
‚úÖ **–í—ñ–¥–º–æ–≤–æ—Å—Ç—ñ–π–∫—ñ—Å—Ç—å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–≤—Ç–æ—Ä—é—î –Ω–µ–≤–¥–∞–ª—ñ –∑–∞–ø–∏—Ç–∏  
‚úÖ **–î–µ—Ç–∞–ª—å–Ω–∏–π –ø—Ä–æ–≥—Ä–µ—Å** - –ø–æ–∫–∞–∑—É—î –ø—Ä–æ–≥—Ä–µ—Å –æ–±—Ä–æ–±–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è** - –∫–ª—ñ—î–Ω—Ç–∏ —Å–æ—Ä—Ç—É—é—Ç—å—Å—è –∑–∞ —Å—É–º–æ—é –∑–∞–º–æ–≤–ª–µ–Ω—å  
‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –ø–æ–∫–∞–∑—É—î –∑–∞–≥–∞–ª—å–Ω—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –µ–∫—Å–ø–æ—Ä—Ç—É  

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
```bash
pip install requests
```

2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –≤ `config.json`:
```json
{
  "api_key": "–≤–∞—à_api_key_–∑_keycrm",
  "proxy": {
    "enabled": true,
    "host": "–≤–∞—à_–ø—Ä–æ–∫—Å—ñ_—Ö–æ—Å—Ç",
    "port": 80,
    "username": "–≤–∞—à_—é–∑–µ—Ä–Ω–µ–π–º",
    "password": "–≤–∞—à_–ø–∞—Ä–æ–ª—å"
  }
}
```

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ë–∞–∑–æ–≤–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
```bash
python keycrm_export_clients.py
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç

–°–∫—Ä–∏–ø—Ç —Å—Ç–≤–æ—Ä–∏—Ç—å —Ñ–∞–π–ª `keycrm_clients_export_YYYYMMDD_HHMMSS.csv` –∑ –¥–∞–Ω–∏–º–∏ –≤—Å—ñ—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤.

**–ü—Ä–∏–∫–ª–∞–¥ CSV —Ñ–∞–π–ª—É:**
```csv
ID –∫–ª—ñ—î–Ω—Ç–∞,–Ü–º'—è,–ü—Ä—ñ–∑–≤–∏—â–µ,–ü–æ–≤–Ω–µ —ñ–º'—è,Email,–¢–µ–ª–µ—Ñ–æ–Ω,–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞ –∑–∞–º–æ–≤–ª–µ–Ω—å (‚Ç¥),–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–º–æ–≤–ª–µ–Ω—å,–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
12345,–Ü–≤–∞–Ω,–ü–µ—Ç—Ä–æ–≤,–Ü–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤,ivan@email.com,+380501234567,15000.00,5,2023-01-15
67890,–ú–∞—Ä—ñ—è,–°–∏–¥–æ—Ä–µ–Ω–∫–æ,–ú–∞—Ä—ñ—è –°–∏–¥–æ—Ä–µ–Ω–∫–æ,maria@email.com,+380671234567,12500.50,3,2023-02-20
```

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

### –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—ñ–≤
- **–ó –ø—Ä–æ–∫—Å—ñ**: –º–∞–∫—Å–∏–º—É–º 5 –ø—Ä–æ—Ü–µ—Å—ñ–≤
- **–ë–µ–∑ –ø—Ä–æ–∫—Å—ñ**: –º–∞–∫—Å–∏–º—É–º 2 –ø—Ä–æ—Ü–µ—Å–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∞–¥–∞–ø—Ç—É—î—Ç—å—Å—è –¥–æ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —è–¥–µ—Ä CPU

### Rate Limiting
- 200 –∑–∞–ø–∏—Ç—ñ–≤ –Ω–∞ —Ö–≤–∏–ª–∏–Ω—É (–∑–≥—ñ–¥–Ω–æ –∑ –æ–±–º–µ–∂–µ–Ω–Ω—è–º–∏ KeyCRM API)
- –ó–∞—Ç—Ä–∏–º–∫–∞ 0.3 —Å–µ–∫—É–Ω–¥–∏ –º—ñ–∂ –∑–∞–ø–∏—Ç–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø–æ–≤—Ç–æ—Ä–∏ –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö

## –õ–æ–≥—É–≤–∞–Ω–Ω—è

–°–∫—Ä–∏–ø—Ç —Å—Ç–≤–æ—Ä—é—î –¥–µ—Ç–∞–ª—å–Ω–∏–π –ª–æ–≥ —Ñ–∞–π–ª `client_export_multiprocess.log` –∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ:
- –ü—Ä–æ–≥—Ä–µ—Å –æ–±—Ä–æ–±–∫–∏ –∫–æ–∂–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–æ–∫
- –ü–æ–º–∏–ª–∫–∏ —Ç–∞ —ó—Ö –æ–±—Ä–æ–±–∫—É
- –§—ñ–Ω–∞–ª—å–Ω—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –µ–∫—Å–ø–æ—Ä—Ç—É

## –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–≤–æ–¥—É

```
üì§ –ï–ö–°–ü–û–†–¢ –ö–õ–Ü–Ñ–ù–¢–Ü–í –ó KEYCRM –£ CSV
================================================================================
üåê –ü—Ä–æ–∫—Å—ñ: p.webshare.io:80
üîÑ –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—ñ–≤: 5
üìä –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–ª—ñ—î–Ω—Ç—ñ–≤: 25000
üìÑ –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–æ—Ä—ñ–Ω–æ–∫ (limit=50): 500

üöÄ –ó–∞–ø—É—Å–∫–∞—î–º–æ 5 –ø—Ä–æ—Ü–µ—Å—ñ–≤...
üìÑ P1: –µ–∫—Å–ø–æ—Ä—Ç—É—î–º–æ —Å—Ç–æ—Ä—ñ–Ω–∫—É 1 (1/100, 1.0%)
üìÑ P2: –µ–∫—Å–ø–æ—Ä—Ç—É—î–º–æ —Å—Ç–æ—Ä—ñ–Ω–∫—É 101 (1/100, 1.0%)
...

–†–ï–ó–£–õ–¨–¢–ê–¢–ò –ë–ê–ì–ê–¢–û–ü–†–û–¶–ï–°–û–†–ù–û–ì–û –ï–ö–°–ü–û–†–¢–£:
–ü—Ä–æ—Ü–µ—Å—ñ–≤ –∑–∞–ø—É—â–µ–Ω–æ: 5
–°—Ç–æ—Ä—ñ–Ω–æ–∫ –æ–±—Ä–æ–±–ª–µ–Ω–æ: 500
–ö–ª—ñ—î–Ω—Ç—ñ–≤ –µ–∫—Å–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ: 25000
–ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è: 180.5 —Å–µ–∫—É–Ω–¥
–®–≤–∏–¥–∫—ñ—Å—Ç—å: 138.5 –∫–ª—ñ—î–Ω—Ç—ñ–≤/—Å–µ–∫

‚úÖ –ï–∫—Å–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ!
üìÑ –§–∞–π–ª: keycrm_clients_export_20250804_143022.csv
üë• –ï–∫—Å–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ –∫–ª—ñ—î–Ω—Ç—ñ–≤: 25000
‚è±Ô∏è  –ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è: 180.5 —Å–µ–∫—É–Ω–¥
üöÄ –®–≤–∏–¥–∫—ñ—Å—Ç—å: 138.5 –∫–ª—ñ—î–Ω—Ç—ñ–≤/—Å–µ–∫

üèÜ –¢–û–ü-10 –ö–õ–Ü–Ñ–ù–¢–Ü–í –ó–ê –°–£–ú–û–Æ –ó–ê–ú–û–í–õ–ï–ù–¨:
--------------------------------------------------------------------------------
 1. –Ü–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤                    25000.00‚Ç¥ (12 –∑–∞–º–æ–≤–ª–µ–Ω—å)
 2. –ú–∞—Ä—ñ—è –°–∏–¥–æ—Ä–µ–Ω–∫–æ               18500.50‚Ç¥ (8 –∑–∞–º–æ–≤–ª–µ–Ω—å)
 3. –û–ª–µ–∫—Å–∞–Ω–¥—Ä –ö–æ–≤–∞–ª–µ–Ω–∫–æ           15200.00‚Ç¥ (6 –∑–∞–º–æ–≤–ª–µ–Ω—å)
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
local_bonus_calculator/
‚îú‚îÄ‚îÄ keycrm_export_clients.py      # –û—Å–Ω–æ–≤–Ω–∏–π —Å–∫—Ä–∏–ø—Ç –µ–∫—Å–ø–æ—Ä—Ç—É
‚îú‚îÄ‚îÄ config.json                   # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è API –∫–ª—é—á–∞ —ñ –ø—Ä–æ–∫—Å—ñ
‚îú‚îÄ‚îÄ client_export_multiprocess.log # –õ–æ–≥ —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ keycrm_clients_export_*.csv   # –ï–∫—Å–ø–æ—Ä—Ç–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ
‚îî‚îÄ‚îÄ README_EXPORT.md              # –¶—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```

## –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–±—Ä–æ–±–ª—è—î:
- **–ü—Ä–æ–∫—Å—ñ –ø–æ–º–∏–ª–∫–∏** - –ø–µ—Ä–µ–º–∏–∫–∞—î—Ç—å—Å—è –Ω–∞ –ø—Ä—è–º—ñ –∑'—î–¥–Ω–∞–Ω–Ω—è
- **Rate limiting** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –∑–∞—Ç—Ä–∏–º–∫–∏ —Ç–∞ –ø–æ–≤—Ç–æ—Ä–∏
- **–¢–∏–º—á–∞—Å–æ–≤—ñ –∑–±–æ—ó** - –µ–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–∞–ª—å–Ω–∞ –∑–∞—Ç—Ä–∏–º–∫–∞ –º—ñ–∂ —Å–ø—Ä–æ–±–∞–º–∏
- **–ü–æ—à–∫–æ–¥–∂–µ–Ω—ñ –¥–∞–Ω—ñ** - –ø—Ä–æ–ø—É—Å–∫–∞—î –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω—ñ –∑–∞–ø–∏—Å–∏ –∑ –ª–æ–≥—É–≤–∞–Ω–Ω—è–º

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

- **–ú–æ–≤–∞**: Python 3.6+
- **–ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ**: requests
- **API**: KeyCRM OpenAPI v1
- **–§–æ—Ä–º–∞—Ç –≤–∏–≤–æ–¥—É**: CSV (UTF-8)
- **–ë–∞–≥–∞—Ç–æ–ø—Ä–æ—Ü–µ—Å–æ—Ä–Ω—ñ—Å—Ç—å**: ProcessPoolExecutor
- **–û–±–º–µ–∂–µ–Ω–Ω—è**: 200 –∑–∞–ø–∏—Ç—ñ–≤/—Ö–≤–∏–ª–∏–Ω—É

## –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è

**Q: –°–∫—ñ–ª—å–∫–∏ —á–∞—Å—É –∑–∞–π–º–∞—î –µ–∫—Å–ø–æ—Ä—Ç?**  
A: –î–ª—è 25,000 –∫–ª—ñ—î–Ω—Ç—ñ–≤ –ø—Ä–∏–±–ª–∏–∑–Ω–æ 2-3 —Ö–≤–∏–ª–∏–Ω–∏ –∑ –ø—Ä–æ–∫—Å—ñ, 5-7 —Ö–≤–∏–ª–∏–Ω –±–µ–∑ –ø—Ä–æ–∫—Å—ñ.

**Q: –ß–∏ –º–æ–∂–Ω–∞ –∑—É–ø–∏–Ω–∏—Ç–∏ —ñ –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –µ–∫—Å–ø–æ—Ä—Ç?**  
A: –ù—ñ, –Ω–∞—Ä–∞–∑—ñ –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è. –†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ç–µ—Å—Ç–æ–≤–∏–π —Ä–µ–∂–∏–º –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏.

**Q: –©–æ —Ä–æ–±–∏—Ç–∏ —è–∫—â–æ –ø—Ä–æ—Ü–µ—Å –∑–∞–≤–∏—Å–∞—î?**  
A: –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–±—Ä–æ–±–ª—è—î –∑–∞–≤–∏—Å–∞–Ω–Ω—è. –ü—Ä–∏ –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–º–∏–ª–∫–∞—Ö –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å Ctrl+C.

**Q: –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å –µ–∫—Å–ø–æ—Ä—Ç—É?**  
A: –ü–æ—Ä—ñ–≤–Ω—è–π—Ç–µ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Å—ñ–≤ —É CSV –∑ –∫—ñ–ª—å–∫—ñ—Å—Ç—é –∫–ª—ñ—î–Ω—Ç—ñ–≤ –≤ –ª–æ–≥–∞—Ö.
